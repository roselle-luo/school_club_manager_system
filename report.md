项目技术方案

- 技术栈：前端 `uni-app + Vue3`；后端 `Gin + Gorm + MySQL`；认证 `JWT`；文档 `Swagger`
- API：统一前缀 `/api/v1`；响应结构 `{ code, msg, status, data }`；公共与鉴权分组
- 架构分层：前端（页面路由/统一请求/简易守卫）与后端（控制器/中间件/模型/工具库）清晰分离
- 小程序：`pages.json` 管理页面与 `tabBar`；请求层携带 `Authorization`，401 清 Token 并重定向登录；路由工具封装导航与 Tab 识别
- 前端功能：社团列表/详情/主页、活动列表/详情、公告列表、我的成员关系与资料编辑（与后端分页、鉴权接口对齐）
- 数据模型：`User/Role`，`Club/ClubCategory/Membership`，`Announcement/Activity/Achievement`，`Attendance`，`ActivityParticipant`（覆盖成员关系、考勤与报名）
- 中间件：`CORS` 放通方法与头；`JWT` 解析并注入 `currentUser`；统一错误返回
- 关键接口与职责：
  - 公共：健康检查、登录/注册、社团列表与详情、公告列表、活动列表与详情、类别列表
  - 学生：申请/退出社团、我的成员关系、我的资料查询与更新
  - 成员：活动报名/查询/取消；活动与社团签到/签退；我的考勤
  - 负责人：待审批列表、通过/驳回、成员检索、负责人视图、社团考勤检索与删除异常
  - 管理员：更新成员在社团内的角色
- 权限策略：管理员/负责人（leader/advisor）/成员分层校验；所有接口进行参数与角色校验，错误码规范（400/401/403/404/500）
- 静态与上传：图片保存到 `public/uploads`，对外经 `/static/...` 访问
- 配置与运行：默认端口 `:9000`；前端 `BASE_URL` 默认 `http://localhost:9000/api/v1`
- 构建与文档：后端二进制产物在 `build/`（Win/Linux）；Swagger UI 挂载 `/swagger/*any`

请求流转与对齐
- 前端：读取 `token` 并注入 `Authorization`；失败弹 `msg` 并在 401 时回登录
- 后端：JWT 校验 → 获取 `currentUser` → 控制器参数与权限校验 → Gorm 数据访问 → 统一体返回
- 分页与检索：公共与鉴权接口均支持 `page/pageSize` 与关键词过滤，提升列表性能与体验

角色与权限矩阵（接口分组权限）

| 角色            | 公共接口 `/public` | 上传 `/upload` | 学生 `/student` | 成员 `/member` | 负责人 `/leader` | 管理员 `/admin` |
|-----------------|--------------------|----------------|------------------|----------------|------------------|-----------------|
| 游客            | ✓                  | –              | –                | –              | –                | –               |
| 学生（登录）    | ✓                  | ✓              | ✓                | 需社团成员     | –                | –               |
| 成员（登录）    | ✓                  | ✓              | ✓                | ✓              | –                | –               |
| 负责人（登录）  | ✓                  | ✓              | ✓                | ✓              | ✓                | –               |
| 管理员（登录）  | ✓                  | ✓              | ✓                | ✓              | ✓                | ✓               |

- 说明：
  - 上传接口需登录（任意角色），返回可直接访问的 `/static/uploads/...` URL
  - 成员接口需满足社团成员关系（`Membership`），负责人接口需 `leader/advisor` 或管理员
  - 公共接口包含登录/注册、社团/公告/活动/类别查询；其余均需 `Authorization: Bearer <token>`
